# Reporting Scripts

This directory contains just one utility script at present that is used in
reporting/QA.

## Latency vs Throughput Plotting

[`latency_throughput.py`](./latency_throughput.py) is a Python script that uses
[matplotlib] to plot a graph of transaction latency vs throughput rate based on
the CSV output generated by the [loadtime reporting
tool](../../../test/loadtime/cmd/report/).

### Setup

Execute the following within this directory (the same directory as the
`latency_throughput.py` file).

```bash
# Create a virtual environment into which to install your dependencies
python3 -m venv .venv

# Activate the virtual environment
source .venv/bin/activate

# Install dependencies listed in requirements.txt
pip install -r requirements.txt

# Show usage instructions and parameters
./latency_throughput.py --help
```

### Running

Let's say your execution of the loadtime reporting tool resulted in a set of
files: `c01_r0025.csv`, `c01_r0050.csv`, etc. and these files are related to
a load test against Tendermint v0.34.x.

By default the script assumes you ran each experiment for 90 seconds, but you
can override this (see the script usage instructions).

```bash
# While the virtual environment is activated (see the Setup steps)
# This will generate a plot in a PNG file called 'tm034.png' in the current
# directory. The default title of the plot is overridden below, but the default
# duration of 90s is assumed (use the -d flag to override this).
#
# Also assumes your shell can expand the syntax used in the final parameter,
# which lists all of the input CSV files to process.
./latency_throughput.py \
    -t 'Tendermint v0.34.x Latency vs Throughput' \
    ./tm034.png \
    /path/to/csv/files/c0{1,2,4}_r0{025,050,100,200}.csv
```

[matplotlib]: https://matplotlib.org/
